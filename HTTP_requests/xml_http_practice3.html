<!doctype html>
<html lang="en-US">
  <head>
    <title>XMLHttp Practice 3</title>
    <meta charset="utf-8">
    <script>
      var new_product = {
        name: "Gold pen 3",
        sku: "125GoldP",
        price: 495,
      }
      var request = new XMLHttpRequest();
      request.open("POST", "https://ls-230-web-store-demo.herokuapp.com/v1/products");
      request.setRequestHeader('Content-Type', 'application/json');
      request.setRequestHeader("Authorization", "token AUTH_TOKEN");
      request.addEventListener("load", function(e) {
        console.log(request.response);
        var request2 = new XMLHttpRequest();
        request2.open("GET", "https://ls-230-web-store-demo.herokuapp.com/v1/products");
        request2.setRequestHeader("Authorization", "token AUTH_TOKEN");
        request2.responseType = "json";
        request2.addEventListener("load", function(e) {
          console.log(request2.response);
        });
        request2.send();
      });
      request.send(JSON.stringify(new_product));
      request.addEventListener("error", function(e) {
        console.log('The request could not be completed!');
      });
    </script>
  </head>
  <body>
  </body>
</html>
